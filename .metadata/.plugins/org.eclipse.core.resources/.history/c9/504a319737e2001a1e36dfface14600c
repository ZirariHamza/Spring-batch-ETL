package com.java.project.batch;

import java.util.regex.Pattern;

import org.springframework.batch.item.ItemProcessor;
import org.springframework.stereotype.Component;

import com.java.project.model.Logs;
import com.java.project.model.employee;

@Component
public class Processor implements ItemProcessor<employee, employee>{

	private String re1 = "^[a-zA-Z]*,[a-zA-Z]*,[a-zA-Z]*,[a-zA-Z]*$";
	private String re2 = "^(\\d*),[a-zA-Z]*,(\\d*),(\\d*)$";
	
	@Override
	public employee process(employee employee){

		Pattern pt2 = Pattern.compile(re2);
		Matcher mt1 = pt2.matcher(employee);
		if(mt1.matches() == true){
			System.out.println("Header structure matched");
			System.out.println(employee.toString());
		}else if(mt2.matches() == true) {
			String[] part = line.split(",");
			employee e = new employee(Integer.parseInt(part[0]), part[1], part[2], Integer.parseInt(part[3]));
			userRepository.save(e);
			System.out.println("employee : " + e);
		}else {
		}
		return employee;
	}

}
